{{ $currentPage := .currentPage }}
<ul>
	{{ range .pages }}
		{{ $isCurrentOrAncestor := or (eq $currentPage .) ($currentPage.IsDescendant .) }}
		<li {{ if eq $currentPage . }}class="nav-current"{{ end }}>
			<a href="{{ .RelPermalink }}">{{ .Title }}</a>
		</li>
		{{ if and .Pages $isCurrentOrAncestor }}
			{{ partial "recursive_nav.html" (dict "currentPage" $currentPage "pages" .Pages) }}
		{{ end }}
	{{ end }}
</ul>
